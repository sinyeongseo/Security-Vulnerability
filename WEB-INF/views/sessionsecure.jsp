<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Session Securecoding</title>

<style type="text/css">
* {
      padding: 0;
      margin: 0;
      border: none;
  }
  .security-wrapper {
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.1);
  }
  .security {
    width: 550px;
    height: 350px;
    background: white;
    border-radius: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }
  button {
    margin: 0 5px;
    width: 20%;
    height: 45px;
    border: 10px;
    outline: none;
    border-radius: 40px;
    background: linear-gradient(to left, rgb(0, 51, 255), rgb(153, 204, 255));
    color: white;
    font-size: 0.8em;
    letter-spacing: 2px;
    text-align: center;
  }
  input {
     border: 1px solid #444444;
  }
  textarea {
     border: 1px solid #444444;
  }
  input::placeholder {
     border: 1px solid #444444;
  }
  form {
    display: inline;
  }
  .return{
 	 margin: 0 5px;
    width: 20%;
    height: 45px; /* Match the height of the buttons */
    border: 10px;
    outline: none;
    border-radius: 40px;
    background: linear-gradient(to left, rgb(0, 51, 255), rgb(153, 204, 255));
    color: white;
    font-size: 0.8em;
    letter-spacing: 2px;
    text-align: center;
    display: inline-block; /* Add this to make the anchor elements inline-block */
    text-decoration: none; /* Remove underline for anchor elements */
  }
  h3{
  	color:#0064FF;
  }
  font{
   color:#0064FF;
  }
</style>
</head>
<body>
<div class="security-wrapper">
<div class="security">
<br>
<font style="font-size:0.5px">쿠키에 http only 속성을 추가하여 javascript에서 쿠키에 접근하지 못하도록 한다.</font>
<table>
    <tr>
    <td width="600" valign=top>
    <form method="get" action="/sessionsecureattack.do">
    <table>
        <tr><td colspan=2 align=center><h3>게시물 변경</h3></td></tr>
        <tr> 
            <td align=center width=15%>
                <font>작성자</font>
            </td> 
            <td width=95%>
                <input type="text" name="user">
            </td> 
        </tr>
        <tr> 
            <td width=15%>
                <font>&nbsp;&nbsp;제 목</font>
            </td> 
            <td width=95%>
                <input type="text" name="title">
            </td> 
        </tr>
        <tr> 
            <td width=15%>
                <font>&nbsp;&nbsp;내 용</font>
            </td> 
            <td width=85%>
                <textarea name="contents" rows="10" cols="60"></textarea>
            </td> 
        </tr> 
    </table>
     <div id="button" align=center>
     <button  type="submit" id="sessionbtn"> 변경하기</button>
      <a href="/" class="return"> main 화면<br>으로 이동</a>
      </div>
    </form>   
    </td>
    </tr>
</table>
<br><br>
 </div>
 </div>
<script type="text/javascript" charset="UTF-8">
document.getElementById('sessionbtn').addEventListener('click', function() {
	const url = '/setcookie.do';
	expireCookie("test");
    fetch(url)
        .then(response => {
            if (response.ok) {
                console.log('쿠키가 성공적으로 설정되었습니다.');
            } else {
                console.error('쿠키 설정 중 오류가 발생했습니다.');
            }
        })
        .catch(error => {
            console.error('네트워크 오류:', error);
        });
});


function expireCookie(cookieName) {
    var now = new Date();
    now.setFullYear(now.getFullYear() - 1); 
    var expiredCookie = cookieName + "=; expires=" + now.toGMTString() + "; path=/";
   
    document.cookie = expiredCookie;
}

</script>
</body>
</html>